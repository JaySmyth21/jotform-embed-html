<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your JotForm with Dynamic Logic</title>
</head>
<body>
    <h1>Your JotForm</h1>
    <!-- Embed your JotForm here -->
    <iframe src="https://form.jotform.com/242687434974269" style="width:100%; height:600px;" frameborder="0"></iframe>
<script>
   

 window.addEventListener("message", function(event) {
    console.log("Received message:", event.data);
    
    // Assuming your message format is correct
    const parsedData = event.data.split(':');
    
    if (parsedData.length === 4) {
        const fieldType = parsedData[0];
        const resourceName = parsedData[1];
        const resourceStatus = parsedData[2];

        // Update fields based on the resource status
        if (fieldType === "piercerstatus") {
            if (piercerField) {
                piercerField.value = `${resourceName}: ${resourceStatus}`;
                console.log(`Updated Piercer Field: ${resourceName} - ${resourceStatus}`);
            }
        } else if (fieldType === "juniorpiercerstatus") {
            if (juniorPiercerField) {
                juniorPiercerField.value = `${resourceName}: ${resourceStatus}`;
                console.log(`Updated Junior Piercer Field: ${resourceName} - ${resourceStatus}`);
            }
        } else {
            console.warn(`Field element not found for name: ${fieldType}`);
        }
    } else {
        console.warn(`Received message format is incorrect: ${parsedData}`);
    }
});

// This function will run when the window is fully loaded
window.onload = function() {
    console.log("Document loaded. Checking field elements.");

    // Get the field elements using their names
    const juniorPiercerField = document.querySelector('input[name="q81_juniorpiercerstatus"]');
    const piercerField = document.querySelector('input[name="q80_piercerstatus"]'); // Adjust if needed

    console.log("Junior Piercer Field:", juniorPiercerField);
    console.log("Piercer Field:", piercerField);
};


</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JotForm with Dynamic Logic</title>
</head>
<body>
    <h1>Your JotForm</h1>
    <!-- Embed your JotForm -->
    <iframe id="jotform-iframe" src="https://form.jotform.com/242687434974269" style="width:100%; height:600px;" frameborder="0"></iframe>

<script>
    window.addEventListener("message", function(event) {
        console.log("Received message:", event.data);

        const parsedData = event.data.split(':');
        
        if (parsedData.length === 3) {
            const fieldType = parsedData[0];
            const resourceName = parsedData[1];
            const resourceStatus = parsedData[2];

            const jotformIframe = document.getElementById("jotform-iframe").contentWindow;

            if (fieldType === "piercerstatus") {
                jotformIframe.postMessage(`setValue:input_80:${resourceStatus}`, "*");
                console.log(`Set Piercer Status to: ${resourceStatus}`);
            } else if (fieldType === "juniorpiercerstatus") {
                jotformIframe.postMessage(`setValue:input_81:${resourceStatus}`, "*");
                console.log(`Set Junior Piercer Status to: ${resourceStatus}`);
            }
        }
    });
</script>
</body>
</html>
